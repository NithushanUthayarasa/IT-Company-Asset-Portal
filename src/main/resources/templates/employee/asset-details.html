<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Details</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            margin: 0;
            padding: 0;
            color: #1f2937;
        }

        .navbar-slim {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%) !important;
            padding: 0.75rem 1.5rem;
            min-height: 60px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1030;
        }

        .btn-back {
            background-color: #ffffff !important;
            color: #1e40af !important;
            border: 1px solid #d1d5db !important;
            padding: 0.5rem 1.25rem;
            font-weight: 600;
            border-radius: 6px;
        }

        .btn-back:hover {
            background-color: #f3f4f6 !important;
        }

        .container {
            max-width: 1100px;
            margin: auto;
            padding: 2rem;
            padding-top: 110px;
        }

        h1, h2 {
            color: #111827;
            font-weight: 700;
            margin-bottom: 1.5rem;
        }

        /* TABLE CARD – keep nice rounded corners on the whole card */
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background: #ffffff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
        }

        th, td {
            padding: 1rem 1.5rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        /* THIS IS THE ONLY CHANGE – 100% SHARP HEADER, NO CURVE AT ALL */
        th {
            background-color: #1e40af !important;
            color: white !important;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.875rem;
            letter-spacing: 0.05em;

            /* KILL ALL ROUNDED CORNERS */
            border-radius: 0 !important;
        }

        /* Extra safety – make sure corners stay sharp even on first row */
        table tr:first-child th:first-child { border-top-left-radius: 0 !important; }
        table tr:first-child th:last-child  { border-top-right-radius: 0 !important; }

        td {
            font-size: 1rem;
            color: #374151;
        }

        tr:last-child td { border-bottom: none; }
        tr:hover td { background-color: #f9fafb; }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .status-available { background-color: #dcfce7; color: #15803d; }
        .status-assigned  { background-color: #fee2e2; color: #b91c1c; }

        .no-data { text-align: center; color: #6b7280; font-style: italic; padding: 2rem 0; }
    </style>
</head>
<body>

<nav class="navbar navbar-dark navbar-slim fixed-top">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">Asset Details</span>
        <a href="/employee/my-assets" class="btn btn-back">Back</a>
    </div>
</nav>

<div class="container">
    <h1>Asset Details</h1>

    <table>

        <tr><th>Asset Tag</th>     <td th:text="${asset.assetTag != null ? asset.assetTag : '-'}"></td></tr>
        <tr><th>Status</th>
            <td><span th:text="${asset.status != null ? asset.status : '-'}"
                      th:classappend="${asset.status == 'AVAILABLE' ? 'status-badge status-available' : 'status-badge status-assigned'}"></span></td>
        </tr>
        <tr><th>Assigned To</th>   <td th:text="${asset.assignedTo != null ? asset.assignedTo.fullName : '-'}"></td></tr>
        <tr><th>Assigned Date</th> <td th:text="${asset.assignedDate != null ? #temporals.format(asset.assignedDate, 'yyyy-MM-dd') : '-'}"></td></tr>
    </table>

    <h2>Asset History</h2>

    <table>
        <thead>
        <tr>
            <th>Description</th>
            <th>Event</th>
            <th>Timestamp</th>
            <th>Performed By</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="historyItem : ${history}">
            <td th:text="${historyItem.description}"></td>
            <td th:text="${historyItem.event}"></td>
            <td th:text="${historyItem.timestamp != null ? #temporals.format(historyItem.timestamp, 'yyyy-MM-dd HH:mm') : '-'}"></td>
            <td th:text="${historyItem.performedBy != null ? historyItem.performedBy.fullName : '-'}"></td>
        </tr>
        <tr th:if="${history == null or #lists.isEmpty(history)}">
            <td colspan="4" class="no-data">No history available</td>
        </tr>
        </tbody>
    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>